<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Model &mdash; Sampyl 0.2.2 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.2.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Sampyl 0.2.2 documentation" href="index.html" />
    <link rel="next" title="Samplers" href="samplers.html" />
    <link rel="prev" title="Distributions" href="distributions.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="samplers.html" title="Samplers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="distributions.html" title="Distributions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Sampyl 0.2.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="model">
<span id="id1"></span><h1>Model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h1>
<p>The model is a class to make accessing log P(X) and grad log P(X) functions easier. Models contain caches for both log P(X) and the gradient. This is intended to be used when building new samplers, users won&#8217;t typically need this.</p>
<p>There are two models currently. <a class="reference internal" href="#model-class"><span>Model</span></a> expects separate
log P(X) and gradient functions. <a class="reference internal" href="#single-model-class"><span>SingleModel</span></a>
expects one function that returns both log P(x) and the gradient.</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">logp</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
    <span class="o">...</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">init_model</span><span class="p">(</span><span class="n">logp</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">some_state</span>
<span class="n">logp_val</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">logp</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">grad_val</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">grad</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">logp_val</span><span class="p">,</span> <span class="n">grad_val</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<span class="target" id="module-model"><span id="model-class"></span></span><dl class="function">
<dt id="model.init_model">
<code class="descclassname">model.</code><code class="descname">init_model</code><span class="sig-paren">(</span><em>logp</em>, <em>grad_logp=None</em>, <em>grad_logp_flag=False</em><span class="sig-paren">)</span><a class="headerlink" href="#model.init_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a model and return it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>logp</strong> &#8211; log P(X) function for sampling distribution.</li>
<li><strong>grad_logp</strong> &#8211; <p>(optional) <em>function, list of functions, or boolean.</em>
Gradient log P(X) function. If left as None, then <cite>grad_logp_flag</cite>
is checked. If the flag is <cite>True</cite>, then the gradient will be 
automatically calculated with autograd.</p>
<p>If <cite>grad_logp</cite> is set to True, then a SingleModel is returned.</p>
</li>
<li><strong>grad_logp_flag</strong> &#8211; (optional) <em>boolean.</em>
Flag indicating if the gradient is needed or not.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="model.Model">
<em class="property">class </em><code class="descclassname">model.</code><code class="descname">Model</code><span class="sig-paren">(</span><em>logp_func</em>, <em>grad_func=None</em>, <em>grad_logp_flag=False</em><span class="sig-paren">)</span><a class="headerlink" href="#model.Model" title="Permalink to this definition">¶</a></dt>
<dd><p>A model for separate logp and grad_logp functions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>logp</strong> &#8211; log P(X) function for sampling distribution.</li>
<li><strong>grad_logp</strong> &#8211; (optional) <em>function or list of functions.</em>
Gradient log P(X) function. If left as None, then <cite>grad_logp_flag</cite>
is checked. If the flag is <cite>True</cite>, then the gradient will be 
automatically calculated with autograd.</li>
<li><strong>grad_logp_flag</strong> &#8211; (optional) <em>boolean.</em>
Flag indicating if the gradient is needed or not.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="model.Model.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>state</em><span class="sig-paren">)</span><a class="headerlink" href="#model.Model.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return log P(X) and grad log P(X) given a <a class="reference internal" href="state.html#state"><span>state</span></a> X</p>
</dd></dl>

<dl class="method">
<dt id="model.Model.clear_cache">
<code class="descname">clear_cache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#model.Model.clear_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear caches.</p>
</dd></dl>

<dl class="method">
<dt id="model.Model.grad">
<code class="descname">grad</code><span class="sig-paren">(</span><em>state</em><span class="sig-paren">)</span><a class="headerlink" href="#model.Model.grad" title="Permalink to this definition">¶</a></dt>
<dd><p>Return grad log P(X) given a <a class="reference internal" href="state.html#state"><span>state</span></a> X</p>
</dd></dl>

<dl class="method">
<dt id="model.Model.logp">
<code class="descname">logp</code><span class="sig-paren">(</span><em>state</em><span class="sig-paren">)</span><a class="headerlink" href="#model.Model.logp" title="Permalink to this definition">¶</a></dt>
<dd><p>Return log P(X) given a <a class="reference internal" href="state.html#state"><span>state</span></a> X</p>
</dd></dl>

</dd></dl>

<span class="target" id="single-model-class"></span><dl class="class">
<dt id="model.SingleModel">
<em class="property">class </em><code class="descclassname">model.</code><code class="descname">SingleModel</code><span class="sig-paren">(</span><em>logp_func</em><span class="sig-paren">)</span><a class="headerlink" href="#model.SingleModel" title="Permalink to this definition">¶</a></dt>
<dd><p>A model for a logp function that returns both the cost function and
the gradient. Caches values to improve performance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>logp_func</strong> &#8211; Function that returns log P(X) and its gradient.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="model.SingleModel.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>state</em><span class="sig-paren">)</span><a class="headerlink" href="#model.SingleModel.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return log P(X) and grad log P(X) given a <a class="reference internal" href="state.html#state"><span>state</span></a> X</p>
</dd></dl>

<dl class="method">
<dt id="model.SingleModel.clear_cache">
<code class="descname">clear_cache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#model.SingleModel.clear_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear caches.</p>
</dd></dl>

<dl class="method">
<dt id="model.SingleModel.grad">
<code class="descname">grad</code><span class="sig-paren">(</span><em>state</em><span class="sig-paren">)</span><a class="headerlink" href="#model.SingleModel.grad" title="Permalink to this definition">¶</a></dt>
<dd><p>Return grad log P(X) given a <a class="reference internal" href="state.html#state"><span>state</span></a> X</p>
</dd></dl>

<dl class="method">
<dt id="model.SingleModel.logp">
<code class="descname">logp</code><span class="sig-paren">(</span><em>state</em><span class="sig-paren">)</span><a class="headerlink" href="#model.SingleModel.logp" title="Permalink to this definition">¶</a></dt>
<dd><p>Return log P(X) given a <a class="reference internal" href="state.html#state"><span>state</span></a> X</p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Sampyl</a></h1>





<p>
<iframe src="https://ghbtns.com/github-btn.html?user=mcleonard&repo=sampyl&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>


<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="distributions.html">Distributions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="samplers.html">Samplers</a></li>
<li class="toctree-l1"><a class="reference internal" href="state.html">State</a></li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="distributions.html"
                        title="previous chapter">Distributions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="samplers.html"
                        title="next chapter">Samplers</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Mat Leonard, Andrew Miller.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.3</a>
      
      |
      <a href="_sources/model.txt"
          rel="nofollow">Page source</a></li>
    </div>

    

    
  </body>
</html>